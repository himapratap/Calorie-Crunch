<body class="landing">
    <!-- Page Wrapper -->
    <div id="page-wrapper">
        <!-- Header -->
        <header id="header" class="alt">
            <h1><a href="index.html">Calorie Crunch</a></h1>
            <nav id="nav">
                <ul>
                    <li class="special">
                        <a href="#menu" class="menuToggle"><span>Menu</span></a>
                        <div id="menu">
                            <ul>
                                <li><a href="/">Home</a></li>
                                <li><a href="/signup">Sign Up</a></li>
                                <li><a href="user.html">User Profile Example</a></li>
                                <!-- <li><a href="elements.html">Elements</a></li> -->
                                <!-- <li><a href="#">Sign Up</a></li> -->
                                <!-- <li><a href="#">Log In</a></li> -->
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </header>
        <!-- Banner -->
        <section id="banner">
            <div class="inner">
                <h2>Calorie<br>Crunch!</h2>
                <p>Count Calories.
                    <br/> Track weight goals.
                    <br/> Live healthy.
                </p>
                <ul class="actions">
                    <li><a href="/login" class="button special logIn">Log In</a></li>
                    <li><a href="/signup" class="button special signUp">Sign Up</a></li>
                </ul>
            </div>
            <a href="#one" class="more scrolly">Calculate Calories</a>
        </section>
        <!-- One -->
        <section id="one" class="wrapper style1 special">
            <div class="inner">
                <header class="major">
                    <h2>Calorie Calculator</h2>
                    <p>Tell us what you're eating!
                        <br /> Touch the microphone to speak. (ie. "One big mac")</p>
                </header>
                <ul class="icons major">
                        <li><span class="icon fa-microphone major style1" id="button"><span class="label">Lorem</span></span>
                        </li>
                        <li><span class="icon fa-microphone-slash major style1" id="stop"><span class="label">Lorem</span></span>
                        </li>
                </ul>
                
                <form method="post" action="/searchfood">
                <div id="output">--</div>
                    <div class="row uniform">
                        <div class="12u 12u$(xsmall)">
                            <input type="text" name="foodsearch" value="" id="items" placeholder="ie. One big mac" />
                        </div>
                        <div class="12u$">
                            <ul class="actions">
                                <li>
                                    <input type="submit" value="Submit" class="special" id="submitfood" />
                                </li>
                                <li>
                                    <input type="reset" value="Reset" />
                                </li>
                            </ul>
                        </div>
                    </div>
                </form>


            </div>
        </section>
        {{!-- Watson Code --}}
        <script src="assets/js/watson-speech.js"></script>
        <script src="assets/js/fetch.js"></script>
        <script>
        document.querySelector('#button').onclick = function() {

            var $output = $('#output').html('');

            fetch('/api/speech-to-text/token')
                .then(function(response) {
                    return response.text();
                }).then(function(token) {

                    var stream = WatsonSpeech.SpeechToText.recognizeMicrophone({
                        token: token,
                        objectMode: true,
                        format: false,
                        word_confidence: true
                    });

                    stream.on('error', function(err) {
                        console.log(err);
                    });

                    // each result (sentence) gets it's own <span> because Watson will sometimes go back and change a word as it hears more context
                    var $curSentence = $('<span class="interim">&nbsp;</span>').appendTo($output);

                    // a result is approximately equivalent to a sentence, and is the granularity that alternatives are selected on
                    stream.on('data', function(msg) {

                        if (msg.results) {
                            msg.results.forEach(function(result) {
                                // only final results include word confidence
                                if (result.final) {
                                    var html = result.alternatives[0].word_confidence.map(function(pair) {
                                        // the word_confidence array includes a sub-array for wach word like so: ['word', 0.9]
                                        // the score is a range from 1 (100% confident) to 0 (not at all confident)
                                        // RGB color values go on a scale of 0-255 with 0,0,0 being black and 255,255,255 being white.
                                        // In this case, we want confident words to be 0 (black), and the least confident words to be 200 (light grey)
                                        var shade = 200 - Math.round(pair[1] * 200);
                                        return '<span style="color: rgb(' + shade + ',' + shade + ',' + shade + ')">' + pair[0] + '</span>';
                                    }).join(' ') + ' ';

                                    $curSentence.html(html);

                                    $curSentence.removeClass('interim').addClass('final');
                                    // if we have the final text for that sentence, start a new one
                                    $curSentence = $('<span class="interim"/>').appendTo($output);
                                } else {
                                    // for interim results
                                    $curSentence.html(result.alternatives[0].transcript);
                                }
                            });
                        }

                    });

                    document.querySelector('#stop').onclick = stream.stop.bind(stream);

                }).catch(function(error) {
                    console.log(error);
                });
        };
        </script>
        <!-- Two -->
        <section id="two" class="wrapper alt style2">
            <section class="spotlight">
                <div class="image"><img src="assets/images/mac.jpg" alt="" /></div>
                <div class="content">
                    <h2>{{name}}<br/></h2>
                    <table>
                        <thead>
                            <!--                                     <tr>
                                    <th>Name</th>
                                    <th>Content</th>
                                </tr> -->
                        </thead>
                        <tbody>
                            <tr>
                                <td>Serving Size:</td>
                                <td>{{serving}}</td>
                            </tr>
                            <tr>
                                <td>Calories:</td>
                                <td>{{calorie}}</td>
                            </tr>
                            <tr>
                                <td>Calories from Fat:</td>
                                <td>{{caloriefat}}</td>
                            </tr>
                            <tr>
                                <td>Total Fat:</td>
                                <td>{{totalfat}}</td>
                            </tr>
                            <tr>
                                <td>Cholesterol:</td>
                                <td>{{cholesterol}}</td>
                            </tr>
                            <tr>
                                <td>Sodium:</td>
                                <td>{{sodium}}</td>
                            </tr>
                            <tr>
                                <td>Total Carbohydrates:</td>
                                <td>{{carb}}</td>
                            </tr>
                            <tr>
                                <td>Protein:</td>
                                <td>{{protein}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <!-- <section class="spotlight">
                <div class="image"><img src="images/pic02.jpg" alt="" /></div>
                <div class="content">
                    <h2>Tortor dolore feugiat<br />
                                elementum magna</h2>
                    <p>Aliquam ut ex ut augue consectetur interdum. Donec hendrerit imperdiet. Mauris eleifend fringilla nullam aenean mi ligula.</p>
                </div>
            </section>
            <section class="spotlight">
                <div class="image"><img src="images/pic03.jpg" alt="" /></div>
                <div class="content">
                    <h2>Augue eleifend aliquet<br />
                                sed condimentum</h2>
                    <p>Aliquam ut ex ut augue consectetur interdum. Donec hendrerit imperdiet. Mauris eleifend fringilla nullam aenean mi ligula.</p>
                </div>
            </section> -->
        </section>
        <!-- Three -->
        <!-- <section id="three" class="wrapper style3 special">
            <div class="inner">
                <header class="major">
                    <h2>Accumsan mus tortor nunc aliquet</h2>
                    <p>Aliquam ut ex ut augue consectetur interdum. Donec amet imperdiet eleifend
                        <br /> fringilla tincidunt. Nullam dui leo Aenean mi ligula, rhoncus ullamcorper.</p>
                </header>
                <ul class="features">
                    <li class="icon fa-paper-plane-o">
                        <h3>Arcu accumsan</h3>
                        <p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
                    </li>
                    <li class="icon fa-laptop">
                        <h3>Ac Augue Eget</h3>
                        <p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
                    </li>
                    <li class="icon fa-code">
                        <h3>Mus Scelerisque</h3>
                        <p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
                    </li>
                    <li class="icon fa-headphones">
                        <h3>Mauris Imperdiet</h3>
                        <p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
                    </li>
                    <li class="icon fa-heart-o">
                        <h3>Aenean Primis</h3>
                        <p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
                    </li>
                    <li class="icon fa-flag-o">
                        <h3>Tortor Ut</h3>
                        <p>Augue consectetur sed interdum imperdiet et ipsum. Mauris lorem tincidunt nullam amet leo Aenean ligula consequat consequat.</p>
                    </li>
                </ul>
            </div>
        </section> -->
        <!-- CTA -->
        <!-- <section id="cta" class="wrapper style4">
            <div class="inner">
                <header>
                    <h2>Arcue ut vel commodo</h2>
                    <p>Aliquam ut ex ut augue consectetur interdum endrerit imperdiet amet eleifend fringilla.</p>
                </header>
                <ul class="actions vertical">
                    <li><a href="#" class="button fit special">Activate</a></li>
                    <li><a href="#" class="button fit">Learn More</a></li>
                </ul>
            </div>
        </section> -->
        <!-- Footer -->
        <footer id="footer">
            <ul class="icons">
                <li><a href="#" class="icon fa-twitter"><span class="label">Twitter</span></a></li>
                <li><a href="#" class="icon fa-facebook"><span class="label">Facebook</span></a></li>
                <li><a href="#" class="icon fa-instagram"><span class="label">Instagram</span></a></li>
                <li><a href="#" class="icon fa-dribbble"><span class="label">Dribbble</span></a></li>
                <li><a href="#" class="icon fa-envelope-o"><span class="label">Email</span></a></li>
            </ul>
            <ul class="copyright">
                <li>&copy; Rutgers Project #2</li>
            </ul>
        </footer>
    </div>
    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/skel.min.js"></script>
    <script src="assets/js/util.js"></script>
    <!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
    <script src="assets/js/main.js"></script>
</body>
